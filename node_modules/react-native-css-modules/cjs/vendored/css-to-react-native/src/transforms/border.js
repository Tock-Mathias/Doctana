"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tokenTypes_1 = require("../tokenTypes");
const BORDER_STYLE = (0, tokenTypes_1.regExpToken)(/^(solid|dashed|dotted)$/);
const defaultBorderWidth = 1;
const defaultBorderColor = 'black';
const defaultBorderStyle = 'solid';
exports.default = tokenStream => {
    let borderWidth;
    let borderColor;
    let borderStyle;
    if (tokenStream.matches(tokenTypes_1.NONE)) {
        tokenStream.expectEmpty();
        return { borderWidth: 0, borderColor: 'black', borderStyle: 'solid' };
    }
    let partsParsed = 0;
    while (partsParsed < 3 && tokenStream.hasTokens()) {
        if (partsParsed !== 0)
            tokenStream.expect(tokenTypes_1.SPACE);
        if (borderWidth === undefined &&
            tokenStream.matches(tokenTypes_1.LENGTH, tokenTypes_1.UNSUPPORTED_LENGTH_UNIT)) {
            borderWidth = tokenStream.lastValue;
        }
        else if (borderColor === undefined && tokenStream.matches(tokenTypes_1.COLOR)) {
            borderColor = tokenStream.lastValue;
        }
        else if (borderStyle === undefined && tokenStream.matches(BORDER_STYLE)) {
            borderStyle = tokenStream.lastValue;
        }
        else {
            tokenStream.throw();
        }
        partsParsed += 1;
    }
    tokenStream.expectEmpty();
    if (borderWidth === undefined)
        borderWidth = defaultBorderWidth;
    if (borderColor === undefined)
        borderColor = defaultBorderColor;
    if (borderStyle === undefined)
        borderStyle = defaultBorderStyle;
    return { borderWidth, borderColor, borderStyle };
};
